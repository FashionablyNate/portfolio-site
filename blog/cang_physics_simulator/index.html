<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">CANG Physics Simulator | Nathan Spelts</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://nathanspelts.com/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://nathanspelts.com/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://nathanspelts.com/blog/cang_physics_simulator"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="CANG Physics Simulator | Nathan Spelts"><meta data-rh="true" name="description" content="A physics simulator created from scratch. Written in C++ using OpenGL and GLFW."><meta data-rh="true" property="og:description" content="A physics simulator created from scratch. Written in C++ using OpenGL and GLFW."><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2022-05-02T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/FashionablyNate"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://nathanspelts.com/blog/cang_physics_simulator"><link data-rh="true" rel="alternate" href="https://nathanspelts.com/blog/cang_physics_simulator" hreflang="en"><link data-rh="true" rel="alternate" href="https://nathanspelts.com/blog/cang_physics_simulator" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","@id":"https://nathanspelts.com/blog/cang_physics_simulator","mainEntityOfPage":"https://nathanspelts.com/blog/cang_physics_simulator","url":"https://nathanspelts.com/blog/cang_physics_simulator","headline":"CANG Physics Simulator","name":"CANG Physics Simulator","description":"A physics simulator created from scratch. Written in C++ using OpenGL and GLFW.","datePublished":"2022-05-02T00:00:00.000Z","author":{"@type":"Person","name":"Nathan Spelts","description":"Software Engineer @ Hyster-Yale Materials Handling","url":"https://github.com/FashionablyNate","image":"https://github.com/FashionablyNate.png"},"keywords":[],"isPartOf":{"@type":"Blog","@id":"https://nathanspelts.com/blog","name":"Blog"}}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Nathan Spelts RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Nathan Spelts Atom Feed"><link rel="stylesheet" href="/assets/css/styles.5a4e97dc.css">
<script src="/assets/js/runtime~main.44b2dbe1.js" defer="defer"></script>
<script src="/assets/js/main.90cfbffa.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo-light.svg"><link rel="preload" as="image" href="/img/logo-dark.svg"><link rel="preload" as="image" href="https://github.com/FashionablyNate.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo-light.svg" alt="Nathan Spelts Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo-dark.svg" alt="Nathan Spelts Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Nathan Spelts</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><div role="group"><h3 class="yearGroupHeading_rMGB">2023</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/youtube_content_creator">Creating Videos from Reddit Posts and Comments</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/capstone_seasalt_ai">ASR Capstone at Seasalt AI</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_rMGB">2022</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/blog/cang_physics_simulator">CANG Physics Simulator</a></li></ul></div></nav></aside><main class="col col--7"><article class=""><header><h1 class="title_f1Hy">CANG Physics Simulator</h1><div class="container_mt6G margin-vert--md"><time datetime="2022-05-02T00:00:00.000Z">May 2, 2022</time> · <!-- -->5 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/nspelts"><img class="avatar__photo authorImage_XqGP" src="https://github.com/FashionablyNate.png" alt="Nathan Spelts"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/nspelts"><span class="authorName_yefp">Nathan Spelts</span></a></div><small class="authorTitle_nd0D" title="Software Engineer @ Hyster-Yale Materials Handling">Software Engineer @ Hyster-Yale Materials Handling</small><div class="authorSocials_rSDt"><a href="https://github.com/FashionablyNate" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 256 250" preserveAspectRatio="xMidYMid" style="--dark:#000;--light:#fff" class="authorSocialLink_owbf githubSvg_Uu4N"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div id="__blog-post-container" class="markdown"><p>A physics simulator created from scratch. Written in C++ using OpenGL and GLFW.</p>
<p>Welcome to my first post on my new blog! I&#x27;m just about finished up with my junior year in the computer science sequence at Washington State University, and I wanted to talk about my semester project I just presented.</p>
<p>We were allowed to choose any project we wanted, as long as the scope was large enough. So I convinced some of my friends to create something akin to <a href="https://dan-ball.jp/en/javagame/dust/" target="_blank" rel="noopener noreferrer">powder game</a>. I always loved that game as a kid, and was also always curious how it worked under the hood. I&#x27;ve got a lot of interest in low level graphics rendering as well, mainly due to <a href="https://www.youtube.com/watch?v=4O0_-1NaWnY" target="_blank" rel="noopener noreferrer">this video</a> where <a href="https://www.youtube.com/channel/UCUzQJ3JBuQ9w-po4TXRJHiA" target="_blank" rel="noopener noreferrer">jdh</a> creates minecraft using C and OpenGL in 48 hours. So naturally, I convinced everyone to use OpenGL for our physics simulator. It felt like we bit off more than we could chew at times, but ultimately the project turned out really cool and I&#x27;m extremely proud of it.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="time-for-some-technical-details-for-those-interested">Time for some technical details for those interested.<a href="#time-for-some-technical-details-for-those-interested" class="hash-link" aria-label="Direct link to Time for some technical details for those interested." title="Direct link to Time for some technical details for those interested.">​</a></h3>
<p>My biggest contributions to the project were:</p>
<ul>
<li>Creating the infrastructure for drawing things to the screen</li>
<li>Liquid, Gas, and Solid collisions</li>
<li>State transitions</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="drawing-infrastructure">Drawing infrastructure<a href="#drawing-infrastructure" class="hash-link" aria-label="Direct link to Drawing infrastructure" title="Direct link to Drawing infrastructure">​</a></h4>
<p>This part was extrememly tricky and completely new territory for me. I&#x27;d experimented with drawing single triangles to the screen, and rendering some 3d shapes. For example:</p>
<iframe width="450" height="200" src="/videos/openglmeme3.mp4" title="Cubes rotating" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"></iframe>
<a href="openglmeme3.mp4"></a>
<p>But I&#x27;d never attempted anything where new objects were bring drawn on the fly. Thankfully, on the <a href="https://learnopengl.com/" target="_blank" rel="noopener noreferrer">site</a> where I&#x27;ve learned everything I know about OpenGL, there&#x27;s a tutorial on how to create breakout! So I followed the <a href="https://learnopengl.com/In-Practice/2D-Game/Breakout" target="_blank" rel="noopener noreferrer">tutorial</a> and extracted the information I needed to accomplish what I wanted to. Unfortunately this code I got from the tutorial didn&#x27;t count towards my line requirement on the project, but I learned a ton so the time wasn&#x27;t entirely wasted.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="liquid-gas-and-solid-collisions">Liquid, Gas, and Solid collisions<a href="#liquid-gas-and-solid-collisions" class="hash-link" aria-label="Direct link to Liquid, Gas, and Solid collisions" title="Direct link to Liquid, Gas, and Solid collisions">​</a></h4>
<p>This part of the project I can say with confidence that I thought through it and implemented it all on my own. Unfortunately that means making a lot of mistakes along the way. I&#x27;m going to skip all the things I tried that didn&#x27;t work, and get straight to what did work. I ended up creating a double array of entities, an entity being a number that is unique to a particle drawn on the screen. Each entity stores it&#x27;s own components that determine how it should behave. I created a liquid component, gas component, gravity component etc.</p>
<iframe width="450" height="200" src="/videos/gravity.mp4" title="Gravity demonstration" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"></iframe>
<a href="gravity.mp4"></a>
<p><em>A demonstration of gravity</em></p>
<p>Then I wrote rules for what should happen to an entity with a specific component, like the gravity component for example. When a particle has the gravity component, and there&#x27;s not a valid entity in the space below it, it moves down. But if the particle encounters another particle with the border component, it stops moving down. The grid allowed me to check the immediate surroundings of a particle wherever it was, which kept things from getting bogged down too much. From there I started writing a liquid algorithm.</p>
<p><em>A demonstration of water</em></p>
<p>I tried many things to get realistic behaving water, and what I found to be the most effective was random movement. Every water particle chooses a random number between 0 and 99, if that number is odd it moves left, if it&#x27;s even it moves right. The amount the particle moves is dependent on the size of the number chosen. As simple as this is, it took a long time to figure out!</p>
<p><em>A demonstration of steam</em></p>
<p>Steam was fairly simple to figure out, it chooses a random number similarly to water and slowly moves to the left or right as it ascends. Once it reaches a solid object, there&#x27;s a probability that it will condense back into water every few seconds.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="state-transitions">State Transitions<a href="#state-transitions" class="hash-link" aria-label="Direct link to State Transitions" title="Direct link to State Transitions">​</a></h4>
<p>This part was my favorite because it was so simple. Once I had collisions and drawing particles all set up, turning one entity into another was as simple as taking away one component and adding another. There&#x27;s water touching lava? Turn the lava into stone and turn the water into steam! The possibilities for things that could be added are endless. Of course, by the time I got into the stage where I was just adding fun things, I ran out of time unfortunately. But I managed to add water, ice, steam, lava, fire, and stone. I also added birds as my last contribution to the project. I was able to implement them via Boid&#x27;s algorithm, courtesy of <a href="https://eater.net/boids" target="_blank" rel="noopener noreferrer">Ben Eater</a>.</p>
<p><em>A demonstration of birds</em></p>
<p>I had a lot of fun with this project and learned a lot about working with others. I feel like I didn&#x27;t get too technical with my explanations. If you think it was too technical or not technical enough, go ahead and send me an <a href="mailto: nate@nathanspelts.com">email</a> and tell me about it! Even if you don&#x27;t have a specific comment, I&#x27;d love to hear that someone actually read this and enjoyed it! Thanks for your time. :)</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/capstone_seasalt_ai"><div class="pagination-nav__sublabel">Newer post</div><div class="pagination-nav__label">ASR Capstone at Seasalt AI</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#time-for-some-technical-details-for-those-interested" class="table-of-contents__link toc-highlight">Time for some technical details for those interested.</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 nathanspelts.com, Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>